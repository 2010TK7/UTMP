jq.ajax._requestCache={};if(typeof PlazaCommonJS=="undefined"||typeof PlazaCommonJS!="object"){var PlazaCommonJS={charset:jq.browser.mozilla?document.characterSet:document.charset,checkAll:function(c,d,b){var b=b?b:"chkall";count=0;for(var a=0;a<c.elements.length;a++){var f=c.elements[a];if(f.name&&f.name!=b&&!f.disabled&&(!d||(d&&f.name.match(d)))){f.checked=c.elements[b].checked;if(f.checked){count++}}}return count},errorTips:function(a,b){if(jq("#"+b).parent().is("p")){html='<span class="errorTips">'+a+"</span>"}else{html='<p class="errorTips">'+a+"</p>"}jq("#"+b+" .errorTips").remove();jq("#"+b+" .rightTips").remove();jq("#"+b).append(html)},rightTips:function(a,b){if(jq("#"+b).parent().is("p")){html='<span class="rightTips">'+a+"</span>"}else{html='<p class="rightTips">'+a+"</p>"}jq("#"+b+" .errorTips").remove();jq("#"+b+" .rightTips").remove();jq("#"+b).append(html)},centerImg:function(g){var c=jq(g);var a=c.parents("div").first();var j=a.width();var f=a.height();var h=c.prop("width");var b=c.prop("height");var i=j-h;var d=f-b;c.css({position:"relative",left:parseInt(i/2)+"px",top:parseInt(d/2)+"px"})},strlen:function(a){return(jq.browser.msie&&a.indexOf("\n")!=-1)?a.replace(/\r?\n/g,"_").length:a.length},strLenLimit:function(f,b,e){var c=f.value,e=!e?200:e,g=e,a=PlazaCommonJS.strlen(c);for(var d=0;d<c.length;d++){if(c.charCodeAt(d)<0||c.charCodeAt(d)>255){g-=PlazaCommonJS.charset=="utf-8"?2:1}}if(g>=a){document.getElementById(b).innerHTML=Math.floor((g-a)/2)}else{f.value=PlazaCommonJS.mb_cutstr(c,e,0);document.getElementById(b).innerHTML=0}},mb_cutstr:function(f,e,b){var a=0;var c="";var b=!b&&b!==""?"...":b;e=e-b.length;for(var d=0;d<f.length;d++){a+=f.charCodeAt(d)<0||f.charCodeAt(d)>255?(PlazaCommonJS.charset=="utf-8"?3:2):1;if(a>e){c+=b;break}c+=f.substr(d,1)}return c},fetchOffset:function(e,g){var b=0,a=0,g=!g?0:g;if(e.getBoundingClientRect&&!g){var c=e.getBoundingClientRect();var d=Math.max(document.documentElement.scrollTop,document.body.scrollTop);var f=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft);if(document.documentElement.dir=="rtl"){f=f+document.documentElement.clientWidth-document.documentElement.scrollWidth}b=c.left+f-document.documentElement.clientLeft;a=c.top+d-document.documentElement.clientTop}if(b<=0||a<=0){b=e.offsetLeft;a=e.offsetTop;while((e=e.offsetParent)!=null){position=getCurrentStyle(e,"position","position");if(position=="relative"){continue}b+=e.offsetLeft;a+=e.offsetTop}}return{left:b,top:a}},in_array:function(c,b){if(typeof c=="string"||typeof c=="number"){for(var a in b){if(b[a]==c){return true}}}return false},adjustObj:function(b,c){var a=jq("#"+c);a.height(QZFL.dom.getScrollHeight());a.width(QZFL.dom.getScrollWidth())},showWindows:function(a,h,j,l,e,d){dialogPosition=(jq.browser.msie&&jq.browser.version<7)?"absolute":"fixed";btnText1="确定";btnText2="取消";btnAligin="center";switch(e){case 2:btnText1="是";btnText2="否";break;case 3:btnText1="确定";btnText2=false;break;case 4:btnText1="继续";btnText2=false;break;case 5:btnText1="同意";btnText2="拒绝";btnAligin="center";break;case 6:btnText1="我要公开";btnText2="知道了";break}if(e!=-1){if(e&&typeof("btnType")!="undefined"&&isNaN(parseInt(e))&&e.length>1){btnText1=e;btnText2=""}btnHtml='<div style="text-align:'+btnAligin+';" class="o pns"><button id="btn_1" class="buttongreen" onclick=""><span><strong>'+btnText1+"</strong></span></button>";if(btnText2){btnHtml+='&nbsp;&nbsp;&nbsp;&nbsp;<button id="btn_2" class="buttongrey" onclick="jq(\'#fwin_dialog_close\').click();"><span><strong>'+btnText2+"</strong></span></button>"}btnHtml+="</div>"}else{btnHtml=""}message_id=a?a:"fs_100";dialogId="fwin_dialog_"+message_id;contentId="fwin_content_"+message_id;win_dialog='<div style="position: '+dialogPosition+'; z-index: 5; display:none;" class="fwinmask" id="'+dialogId+'">';hideHTML=(d&&typeof(d.hideHTML)!="undefined")?d.hideHTML:false;jumpURL=(d&&typeof(d.jumpURL)!="undefined")?d.jumpURL:"";if(!hideHTML){win_dialog+='<div class="w_box"><div class="w_bm_h cl"><a title="关闭" class="right close" onclick="PlazaCommonJS.hideWindows(\''+dialogId+"', '"+jumpURL+'\', true);" href="javascript:;" id="fwin_dialog_close">关闭</a><h2  class="flb"><em>提示信息</em></h2></div>';if(h){win_dialog+='<div class="w_bm_c t_c mtm mbm"><div id="'+contentId+'"></div></div>'}}else{win_dialog+=h}win_dialog+="</div>";if(!jq("#"+dialogId)[0]){jq(win_dialog).appendTo("body")}if(!hideHTML){jq(".flb em")[0].className="";jq(".flb em").html((j==undefined||j=="")?"提示信息":j)}jq("#"+contentId).html('<div style="margin-bottom:20px; table-layout:fixed; word-break: break-all; overflow:hidden;" class="c">'+h+"</div>"+btnHtml);jq("#"+dialogId).show();dialogWidth=(d&&typeof(d.width)!="undefined")?parseInt(d.width):"auto";if(dialogWidth!="auto"){jq("#"+contentId+" div").first().css({width:(dialogWidth)+"px"})}else{jq("#"+contentId+" div").first().css({width:"auto"})}dialogHeight=(d&&typeof(d.height)!="undefined")?parseInt(d.height):"auto";if(dialogHeight!="auto"){jq("#"+contentId+" div").first().css({height:(dialogHeight)+"px"})}else{jq("#"+contentId+" div").first().css({height:"auto"})}if(d&&typeof(d.overflow)!="undefined"){jq("#"+contentId+" div").first().css({overflow:"auto"})}jq("#"+dialogId+" .close").click(function(){PlazaCommonJS.hideWindows(dialogId)});var k=QZFL.dom.getClientWidth();var g=QZFL.dom.getClientHeight();dialogLeft=(d&&typeof(d.left)!="undefined")?d.left:(k-jq("#"+dialogId).width())/2;dialogTop=(d&&typeof(d.top)!="undefined")?d.top:(g-jq("#"+dialogId).height())*0.382;if(jq.browser.msie&&(jq.browser.version=="6.0")){dialogTop+=QZFL.dom.getScrollTop()}jq("#"+dialogId).css({top:dialogTop+"px",left:dialogLeft+"px"});dragAble=(d&&typeof(d.dragAble)!="undefined")?d.dragAble:true;if(dragAble){QZFL.dragdrop.registerDragdropHandler(dialogId)}if(jq("#btn_1")[0]){if(l){jq("#"+dialogId+" #btn_1").click(l).click(function(){jq("#fwin_dialog_close").click()})}else{jq("#"+dialogId+" #btn_1").click(function(){jq("#fwin_dialog_close").click()})}}var n=(d&&typeof(d.cover)!="undefined")?d.cover:false;if(n){var c="fwin_dialog_"+a+"_cover";var i=jq("#"+dialogId).css("z-index")-1;var m=QZFL.dom.getScrollHeight();var f=QZFL.dom.getScrollWidth();var b='<div id="main" style=""><div id="'+c+'" class="qz_mask" style="position:absolute;top:-0px;left:-0px;width:'+f+"px;height:"+m+"px;background:#000;filter:alpha(opacity=60);opacity:0.5; z-index:"+i+';"></div></div>';jq(b).appendTo("#append_parent");QZFL.event.addEvent(window,"resize",PlazaCommonJS.adjustObj,[c])}return dialogId},hideWindows:function(b,c,a){jq("#"+b).hide();if(a){jq("#"+b).remove()}jq("#"+b+"_cover").remove();QZFL.event.removeEvent(window,"resize",PlazaCommonJS.adjustObj,document);if(c=="refresh"){window.location.reload()}else{if(c&&typeof c!="undefined"){re=/^http(s)?:\/\/(.+\.)*?(qq\.com)(\/.*)*/;if(re.test(c)){window.location.href=c}}}},jqAjax:function(url,data,dataType,callback,completeCB,timeOut,isUpload,isShowLoading,blockIndex,requestMode){timeOut=timeOut?timeOut:30000;var timer="";var mode=requestMode||"block";var beforeFunc=function(XHR,option){if(blockIndex){if(mode=="block"){if(blockIndex){if(jq.ajax._requestCache[blockIndex]){return false}jq.ajax._requestCache[blockIndex]=XHR}}else{if(mode=="abort"){if(jq.ajax._requestCache[blockIndex]){jq.ajax._requestCache[blockIndex].abort()}jq.ajax._requestCache[blockIndex]=XHR}}}isShowLoading=typeof(isShowLoading)!="undefined"&&isShowLoading!==null?isShowLoading:true;if(isShowLoading){timer=setTimeout(function(){PlazaCommonJS.showLoading()},1000)}return true};var completeFunc=function(XHR,status){if(jq.ajax._requestCache[blockIndex]){jq.ajax._requestCache[blockIndex]=null}if(completeCB&&typeof completeCB=="function"){completeCB(XHR,status)}else{if(completeCB){eval(completeCB)}}};var successFunc=function(resData,textStatus,c){clearTimeout(timer);PlazaCommonJS.showLoading("none");if(dataType!="jsonp"){if(resData!==null){if(callback&&typeof callback=="function"){callback(resData)}else{if(callback){eval(callback)}}}else{QZFL.widget.msgbox.show('抱歉：系统出现错误，请您稍候使用！<span class="hide">errno:2</span>',1,1500)}}};var errorFunc=function(XHR,info,errorThrown){clearTimeout(timer);PlazaCommonJS.showLoading("none");if(info!="abort"){QZFL.widget.msgbox.show('抱歉：系统出现错误，请您稍候使用！<span class="hide">errno:1 '+info+"</span>",1,1500)}};var upload=isUpload||false;url=url.indexOf("?")==-1?url+"?":url+"&";url=url.replace(/\&response_type\=[^\&]+/g,"")+"response_type="+dataType;url=url.replace(/\&isAjax\=1/g,"")+"&isAjax=1";jq.ajax({url:url,data:data||null,processData:upload?false:true,contentType:upload?false:"application/x-www-form-urlencoded",type:data?"POST":"GET",dataType:dataType,timeout:timeOut,jsonp:dataType=="jsonp"?"callback":null,jsonpCallback:dataType=="jsonp"?callback:null,beforeSend:beforeFunc,complete:completeFunc,success:successFunc,error:errorFunc});return false},jqAjaxPost:function(formId,mode,callback,showId,noHideParent,execDefaultCB,fileId,completeCB){noHideParent||PlazaCommonJS.hideWindows("fwin_dialog_"+showId);if(formId){formObj=jq("#"+formId);if(fileId){var formDomObj=formObj[0];var formdata=new FormData(formDomObj);formdata.append("file",jq("#"+fileId)[0].files[0])}else{formdata=formObj.serialize()}}PlazaCommonJS.jqAjax(formObj.attr("action"),formdata,mode,function(s){if(callback&&typeof callback=="function"){callback(s)}else{if(callback){eval(callback)}}var isExecDefaultCB=typeof(execDefaultCB)!="undefined"&&execDefaultCB!==null?execDefaultCB:true;if(isExecDefaultCB){PlazaCommonJS._callback(s,showId,1500)}},completeCB,10000,fileId?true:false)},jqAjaxGet:function(c,f,g,a,e,b,d){PlazaCommonJS.hideWindows("fwin_dialog_"+a);PlazaCommonJS.jqAjax(c,"",f,g||function(h){PlazaCommonJS._callback(h,a,1500)},null,null,null,e,b,d)},_callback:function(k,f,i){PlazaCommonJS.hideWindows("fwin_dialog_"+f,"",true);var e=parseInt(k.errCode);var b=k.errMessage||"抱歉：系统出现错误，请您稍候使用！";var g=k.data||"";var d=k.jumpURL||false;var h=k.hideHTML||false;var j=k.cover||false;var a=typeof(k.dragAble)!="undefined"&&k.dragAble!==null?k.dragAble:true;var c=k.btnType||3;if(e==0){if(!h){g&&QZFL.widget.msgbox.show(g,4,i)}else{PlazaCommonJS.showWindows(f,g,"","",c,{hideHTML:h,jumpURL:d,cover:j,dragAble:a})}}else{if(e){b=b+'<span class="hide">code: '+e+"</span>";QZFL.widget.msgbox.show(b,5,i);if(e==30426){setTimeout(function(){PlazaCommonJS.showLoginBox()},i)}}else{QZFL.widget.msgbox.show('抱歉：系统出现错误，请您稍候使用！<span class="hide">errno:3</span>',1,1500)}}if(d=="refresh"){setTimeout(function(){window.location.reload()},i)}else{if(d&&typeof d!="undefined"){re=/^http(s)?:\/\/(.+\.)*?(qq\.com)(\/.*)*/;if(re.test(d)){setTimeout(function(){window.location.href=d},i)}}}},showLoading:function(a,b){var a=a?a:"block";var b=b?b:"请稍候...";jq("#ajaxwaitid").html(b);jq("#ajaxwaitid")[0].style.display=a;if(a=="block"){QZFL.widget.msgbox.show(b,6,0)}else{QZFL.widget.msgbox.hide(100)}},saveUserData:function(a,c){try{this._initStorage();var b="plaza_"+a;if(!!QZFL.Storage.set(b,c)){return true}}catch(d){}return false},loadUserData:function(a){try{this._initStorage();var b="plaza_"+a;return QZFL.Storage.get(b)}catch(c){}},_initStorage:function(){var c=false,a=[],b;QZFL.Storage.setOptions=function(d){b=d};QZFL.Storage.init=function(){var d=arguments;if(c){a.push([d[0],d[1]]);return}a.push([d[0],d[1]]);c=true;QZFL.Storage.create(function(e){var f;if(e){QZFL.Storage.get=e.get;QZFL.Storage.set=e.set;QZFL.Storage.remove=e.remove;QZFL.Storage.clear=e.clear;while(f=a.pop()){e[f[0]].apply(null,f[1])}}else{if(d[0]=="get"){d[1][2](null)}}},b)};if(typeof QZFL.Storage.get!="function"){QZFL.Storage.init("get",arguments)}if(typeof QZFL.Storage.set!="function"){QZFL.Storage.init("set",arguments)}if(typeof QZFL.Storage.remove!="function"){QZFL.Storage.init("remove",arguments)}if(typeof QZFL.Storage.clear!="function"){QZFL.Storage.init("clear",arguments)}},stats:function(a){var b=new Image(1,1);b.src="https://"+qgcDomain+"/"+sId+"/stats?type="+a},showLoginBox:function(){jq.QP.showLoginBox()},logoutConfirm:function(){if(!confirm("您确定要退出吗?")){return}PlazaCommonJS._logout();window.location.reload()},_logout:function(){for(var c=0,b=["uin","skey","zzpaneluin","zzpanelkey","prvk"],a=b.length;c<a;c++){QZFL.cookie.del(b[c])}},openMedia:function(a){tid=a.getAttribute("tid");bpic=a.getAttribute("bpic");hideEle=jq("#thumb_zin_"+tid);showEle=jq("#thumb_zout_"+tid);picEle=jq("#thumb_zout_"+tid+"_img");picEle.attr("src",bpic);showEle.show();hideEle.hide()},closeMedia:function(a){tid=a.getAttribute("tid");hideEle=jq("#thumb_zout_"+tid);showEle=jq("#thumb_zin_"+tid);hideEle.hide();showEle.show()}}}if(typeof PlazaCollection=="undefined"||typeof PlazaCollection!="object"){var PlazaCollection={urlPre:"/collection/",sId:0,add:function(a){var b={cSId:a,CSRFToken:CSRFToken};this.sId=a;jq("#favButton")[0].onclick=function(){};PlazaCommonJS.jqAjax(this.urlPre+"add",b,"json",this.addCallBack,null,1500)},addCallBack:function(b){var a=parseInt(b.errCode);if(a==0){jq("#favButton")[0].onclick=(function(c){return function(){PlazaCollection.remove(c)}})(sId);jq("#siteFav").attr("src",dzqunDomain+"/plaza/images/button_faved.png");jq("#collectedNum").html(b.retData.sCollectedNum)}else{jq("#favButton")[0].onclick=(function(c){return function(){PlazaCollection.add(c)}})(sId)}PlazaCommonJS._callback(b,"win",1500)},remove:function(a){var b={cSId:a,CSRFToken:CSRFToken};this.sId=a;jq("#favButton")[0].onclick=function(){};PlazaCommonJS.jqAjax(this.urlPre+"remove",b,"json",this.removeCallBack,null,1500)},removeCallBack:function(b){var a=parseInt(b.errCode);if(a==0){jq("#favButton")[0].onclick=(function(c){return function(){PlazaCollection.add(c)}})(sId);jq("#siteFav").attr("src",dzqunDomain+"/plaza/images/button_fav.png");jq("#collectedNum").html(b.retData.sCollectedNum)}else{jq("#favButton")[0].onclick=(function(c){return function(){PlazaCollection.remove(c)}})(sId)}PlazaCommonJS._callback(b,"win",1500)}}}var PCJS=PlazaCommonJS;